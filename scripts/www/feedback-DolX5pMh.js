import{_ as k}from"./navBar-Sc4C80VW.js";import{l as F}from"./Group 24-BJuc7rVH.js";import{b}from"./index-By4LL1XK.js";import{r as v,z as B,X as E,b as n,d as D,l as t,F as p,i as g,u as i,E as G,C as L,h as V,o as r,t as c,$ as q,G as f,L as H}from"./.pnpm-B-_m2kGH.js";import{u as R}from"./station-DOwaTfnq.js";import{u as j,a as h}from"./dict-CwYOActj.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-C1_hm9C_.js";import"./index-DyucNCMT.js";const A="data:image/svg+xml,%3csvg%20width='44'%20height='44'%20viewBox='0%200%2044%2044'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group%2059'%3e%3cg%20id='Group%2025'%3e%3crect%20id='image'%20width='44'%20height='44'%20rx='12'%20fill='%23E7EEFF'/%3e%3c/g%3e%3cg%20id='Group%2034'%3e%3crect%20id='Rectangle%201091'%20x='18'%20y='9'%20width='2'%20height='7'%20rx='1'%20fill='%238DACFF'/%3e%3crect%20id='Rectangle%201092'%20x='25'%20y='9'%20width='2'%20height='7'%20rx='1'%20fill='%238DACFF'/%3e%3cpath%20id='Exclude'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17%2013C15.3431%2013%2014%2014.3431%2014%2016V31.8571C14%2033.514%2015.3431%2034.8571%2017%2034.8571H28C29.6569%2034.8571%2031%2033.514%2031%2031.8571V16C31%2014.3431%2029.6569%2013%2028%2013H17ZM18.0476%2017.0476C17.6005%2017.0476%2017.2381%2017.4101%2017.2381%2017.8571C17.2381%2018.3042%2017.6005%2018.6667%2018.0476%2018.6667H26.9524C27.3995%2018.6667%2027.7619%2018.3042%2027.7619%2017.8571C27.7619%2017.4101%2027.3995%2017.0476%2026.9524%2017.0476H18.0476Z'%20fill='url(%23paint0_linear_9015_808)'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_9015_808'%20x1='22.5'%20y1='13'%20x2='22.5'%20y2='34.8571'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23B8CAFB'/%3e%3cstop%20offset='1'%20stop-color='%23628CFD'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",M={class:"feedback"},U={class:"top"},O={class:"imgList"},T=["src"],Z={class:"name"},$={class:"num"},X={class:"infoList"},J={class:"num"},K={class:"displayName"},P={class:"name"},Q={class:"No"},W={class:"num"},Y={class:"footer"},tt={__name:"feedback",setup(st){const u=R(),N=V(),y=G(),{ref_line_status:m}=j("ref_line_status"),C=v([{name:"网关编号",num:"123123",status:0,img:A},{name:"加油机编号",num:"123123",img:F}]),o=v({}),_=v(null),S=async()=>{const a={stationId:u.stationId,machineNo:u.machineNo,gatewayNo:u.gatewayNo,screenCollectorItemList:u.installScreenCollectorItemList.map(l=>({collectorNo:l.collectorNo,screenNoList:l.installScreenItemList.map(e=>e.screenNo)}))};let s=await b(a);u.gatewayStatus=s.data.gatewayStatus,o.value=s.data,C.value.forEach(l=>{l.name=="网关编号"?(l.num=s.data.gatewayNo,l.status=s.data.gatewayStatus):l.num=s.data.machineNo})};B(()=>{S(),_.value=setInterval(()=>{S()},1e3)}),E(()=>{clearInterval(_.value),_.value=null});const w=()=>{for(let a=0;a<o.value.screenCollectorStatusItemList.length;a++){if(!o.value.screenCollectorStatusItemList[a].status){L("请检查采集器编号"+o.value.screenCollectorStatusItemList[a].collectorNo+"的状态");return}for(let s=0;s<o.value.screenCollectorStatusItemList[a].screenStatusItemList.length;s++)if(!o.value.screenCollectorStatusItemList[a].screenStatusItemList[s].status){L("请检查采集器编号"+o.value.screenCollectorStatusItemList[a].collectorNo+"的显示屏编号"+o.value.screenCollectorStatusItemList[a].screenStatusItemList[s].screenNo+"的状态");return}}y.push({path:"/displayListInfo",query:{id:N.query.id}})};return(a,s)=>{const l=k;return r(),n("div",M,[D(l,{title:"显示屏数据回显"}),t("div",U,[s[1]||(s[1]=t("div",{class:"title"},"基础数据",-1)),t("div",O,[(r(!0),n(p,null,g(C.value,e=>(r(),n("div",{class:"item",key:e.name},[t("img",{class:"img",src:e.img,alt:""},null,8,T),t("div",Z,c(e.name),1),t("div",$,c(e.num),1),t("div",{class:f(["status",e.status==0?"checkStatus":""]),style:q({opacity:!e.status&&e.status!=0?0:1})},c(i(h)(e.status,i(m))),7)]))),128))])]),s[2]||(s[2]=t("div",{class:"title"},"设备状态",-1)),t("div",X,[(r(!0),n(p,null,g(o.value.screenCollectorStatusItemList,(e,x)=>(r(),n("div",{class:"info_item",key:x},[t("div",J,[t("span",{class:f(["status",e.status?"":"checkStatus"])},c(i(h)(e.status,i(m))),3),H(" 采集器编号: "+c(e.collectorNo),1)]),(r(!0),n(p,null,g(e.screenStatusItemList,(d,I)=>(r(),n("div",{class:"displayItem",key:I},[t("div",K,[t("div",P," 显示屏"+c(I+1)+":",1),t("div",{class:f(["status",d.status?"":"checkStatus"])},c(i(h)(d.status,i(m))),3)]),t("div",Q,"显示屏编号: "+c(d.screenNo),1),t("div",W,"针脚数: "+c(d.pinNum),1)]))),128))]))),128))]),t("div",Y,[t("div",{class:"btn",onClick:s[0]||(s[0]=()=>i(y).go(-1))},"上一步"),t("div",{class:"nexBtn",onClick:w},"下一步")])])}}},dt=z(tt,[["__scopeId","data-v-b0b25341"]]);export{dt as default};
