import{_ as P}from"./navBar-Sc4C80VW.js";import{q as S,s as b}from"./index-dR22aBmx.js";import{r as i,z as k,X as D,b as u,d as I,l as s,t as r,u as w,F as m,i as g,h as R,o as d}from"./.pnpm-B-_m2kGH.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-C1_hm9C_.js";import"./index-DyucNCMT.js";const B={class:"colection"},L={class:"box"},x={class:"nav"},E={class:"nav"},F={class:"listBox"},V={style:{width:"50%"}},z={class:"one"},C={class:"two"},M={class:"three"},Q={style:{width:"50%"}},X={class:"one"},$={class:"two"},j={class:"three"},A={__name:"index",setup(G){const l=R(),N=i(null),_=i(null),f=async()=>{await S({screenNo:l.query.screenNo,pinNum:l.query.pinNum,gatewayNo:l.query.gatewayNo,collectorNo:l.query.collectorNo}),n.value?(clearInterval(n.value),n.value=null,v(),n.value=setInterval(()=>{v()},5e3)):(v(),n.value=setInterval(()=>{v()},5e3))},n=i(null),v=async()=>{let e=await b({screenNo:l.query.screenNo,pinNum:l.query.pinNum,gatewayNo:l.query.gatewayNo,collectorNo:l.query.collectorNo});_.value=e.data.pinNum,N.value=e.data.screenNo;let c=e.data.samplingList.slice(0,96),a=e.data.samplingList.slice(96);p.value.forEach((t,o)=>{o>=e.data.startPosUp&&(_.value==94?(t.two=t.one-e.data.startPosUp+1,o-1<0?t.two=1:t.two=p.value[o-1].two+2):t.two=t.one-e.data.startPosUp+1,t.three=c[o-e.data.startPosUp])}),h.value.forEach((t,o)=>{o>=e.data.startPosDown&&(_.value==94?(t.two=t.one-e.data.startPosDown+1,o-1<0?t.two=1:t.two=h.value[o-1].two+2):t.two=t.one-e.data.startPosDown+1,t.three=a[o-e.data.startPosDown])})},p=i([]),h=i([]),y=()=>{let e=[];for(let c=0;c<96;c++){let a={one:c,two:0,three:0};e.push(a)}return e},q=()=>{p.value=y(),h.value=y(),f()};return k(()=>{q()}),D(()=>{n.value&&(clearInterval(n.value),n.value=null)}),(e,c)=>(d(),u("div",B,[I(P,{title:"采集率"}),s("div",L,[s("div",x,"显示屏编号: "+r(w(N)),1),s("div",E,"针脚数: "+r(w(_)),1)]),s("div",{class:"btns",onClick:f},"查询显示屏采样率"),s("div",F,[s("div",V,[(d(!0),u(m,null,g(w(p),(a,t)=>(d(),u("div",{class:"box_item",key:t},[s("div",z,r(a.one),1),s("div",C,r(a.two),1),s("div",M,r(a.three),1)]))),128))]),s("div",Q,[(d(!0),u(m,null,g(w(h),(a,t)=>(d(),u("div",{class:"box_item",key:t},[s("div",X,r(a.one),1),s("div",$,r(a.two),1),s("div",j,r(a.three),1)]))),128))])])]))}},Y=U(A,[["__scopeId","data-v-7403d96c"]]);export{Y as default};
