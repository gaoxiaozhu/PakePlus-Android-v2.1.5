import{r as y,z as f,b as I,l as r,d as s,g as t,I as b,J as x,K as V,L as u,M as h,E as k,o as F,C as c}from"./.pnpm-B-_m2kGH.js";import{u as C,v as B}from"./index-4hp_MxG3.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-C1_hm9C_.js";import"./index-DyucNCMT.js";const q={class:"me"},L={style:{margin:"16px"}},R={class:"outLogin"},S={__name:"index",setup(U){const d=k(),e=y({phone:"",oilPassword:"",oilPasswordFlg:"password",oilIcon:"closed-eye",newPassword:"",newPasswordFlg:"password",newIcon:"closed-eye"}),p=async l=>{if(l.oilPassword==l.newPassword){c("新旧密码不能不一致,无法提交");return}(await B(l)).code==200&&(e.value.oilPassword="",e.value.newPassword="",c("修改成功,请重新登录"),d.replace("/login"))},w=l=>{e.value.oilPasswordFlg=e.value.oilPasswordFlg==="text"?"password":"text",e.value.oilIcon=e.value.oilIcon==="closed-eye"?"eye-o":"closed-eye"},m=l=>{e.value.newPasswordFlg=e.value.newPasswordFlg==="text"?"password":"text",e.value.newIcon=e.value.newIcon==="closed-eye"?"eye-o":"closed-eye"},v=async()=>{let l=await C();e.value.phone=l.data},g=()=>{d.replace("/login"),localStorage.removeItem("token")};return f(()=>{v()}),(l,o)=>{const n=x,_=b,i=V,P=h;return F(),I("div",q,[o[5]||(o[5]=r("div",{class:"title"},"修改密码",-1)),s(P,{onSubmit:p},{default:t(()=>[s(_,{inset:""},{default:t(()=>[s(n,{disabled:"",modelValue:e.value.phone,"onUpdate:modelValue":o[0]||(o[0]=a=>e.value.phone=a),name:"phone",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},null,8,["modelValue"]),s(n,{modelValue:e.value.oilPassword,"onUpdate:modelValue":o[1]||(o[1]=a=>e.value.oilPassword=a),type:e.value.oilPasswordFlg,name:"oilPassword",label:"旧密码",placeholder:"请填写旧密码",rules:[{required:!0,message:"请填写旧密码"}],"right-icon":e.value.oilIcon,onClickRightIcon:w},null,8,["modelValue","type","right-icon"]),s(n,{modelValue:e.value.newPassword,"onUpdate:modelValue":o[2]||(o[2]=a=>e.value.newPassword=a),type:e.value.newPasswordFlg,name:"newPassword",label:"新密码",placeholder:"请填新密码",rules:[{required:!0,message:"请填新密码"}],"right-icon":e.value.newIcon,onClickRightIcon:m},null,8,["modelValue","type","right-icon"])]),_:1}),r("div",L,[s(i,{round:"",block:"",type:"primary","native-type":"submit",color:"#0368C2"},{default:t(()=>o[3]||(o[3]=[u(" 提交 ")])),_:1})])]),_:1}),r("div",R,[s(i,{onClick:g,round:"",block:"",type:"warning","native-type":"submit"},{default:t(()=>o[4]||(o[4]=[u(" 退出登录 ")])),_:1})])])}}},J=N(S,[["__scopeId","data-v-59b50b95"]]);export{J as default};
