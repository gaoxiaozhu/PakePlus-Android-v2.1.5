import{r as d,w as V,z as x,h as B,b as N,d as u,l as t,t as I,u as g,V as M,g as b,F as q,i as L,M as C,E as F,C as R,o as m,j as D,J as T}from"./.pnpm-B-_m2kGH.js";import{_ as U}from"./navBar-Sc4C80VW.js";import{l as E}from"./Group 24-BJuc7rVH.js";import{I as G,g as j,c as z,a as J}from"./index-4hp_MxG3.js";import{u as $}from"./station-DOwaTfnq.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-C1_hm9C_.js";import"./index-DyucNCMT.js";const H={class:"displayInstall"},K={class:"card"},O={class:"card_icon_content"},P={class:"icon_num"},Q={class:"card_display_num"},W={class:"footer"},X={__name:"index",setup(Y){const n=$(),p=F(),r=B(),l=d(1);V(()=>l.value,(s,e)=>{if(s>e){if(a.value.length==s)return;a.value.push({screenNo:"",uid:new Date().getTime()})}else a.value.pop()});const a=d([]);x(()=>{h()});const h=async()=>{const s={id:r.query.id,machineNo:n.machineNo};let e=await G(s);e.code==200&&(a.value=e.data.installScreenItemList||[{screenNo:"",uid:new Date().getTime()}],l.value=a.value.length)},_=d(null),y=()=>{_.value.validate().then(()=>{S()})},S=async()=>{let s=a.value.map(c=>c.screenNo),e=await j(s);if(e.data!="0401"){R("该显示屏不支持4G模式");return}const i={id:r.query.id,machineNo:n.machineNo,screenNoList:s,deviceModel:e.data};if((await z({deviceModel:e.data,screenNoList:s})).code!==200)return;(await J(i)).code==200&&(n.installScreenItemList=a.value,p.push({path:"/installState",query:{id:r.query.id}}))};return(s,e)=>{const i=U,v=M,f=T,c=C;return m(),N("div",null,[u(i,{title:"显示屏安装4G模式"}),t("div",H,[t("div",K,[e[5]||(e[5]=t("div",{class:"card_title"},"基础数据",-1)),t("div",O,[e[2]||(e[2]=t("img",{class:"icon",src:E,alt:""},null,-1)),e[3]||(e[3]=t("div",{class:"icon_num"},"加油机编号：",-1)),t("div",P,I(g(n).machineNo),1)]),t("div",Q,[e[4]||(e[4]=t("div",{class:"card_display_num_title"},"显示屏安装",-1)),u(v,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),max:"10","disable-input":""},null,8,["modelValue"])]),u(c,{ref_key:"formRef",ref:_},{default:b(()=>[(m(!0),N(q,null,L(a.value,(o,k)=>(m(),D(f,{key:o.uid,modelValue:o.screenNo,"onUpdate:modelValue":w=>o.screenNo=w,label:"显示屏"+(k+1),placeholder:"请输入显示屏编号",rules:[{required:!0,message:"请输入显示屏编号"}]},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1},512)]),t("div",W,[t("div",{class:"btn",onClick:e[1]||(e[1]=()=>g(p).go(-1))},"上一步"),t("div",{class:"nexBtn",onClick:y},"下一步")])])])}}},re=A(X,[["__scopeId","data-v-b9d36170"]]);export{re as default};
