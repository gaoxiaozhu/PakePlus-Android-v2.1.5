import{W as x,r as L,z as N,X as k,b as i,d as p,l as s,t as n,u as r,h as b,F as D,i as B,O as E,E as C,C as v,o as l,L as T,G as Y,q as w}from"./.pnpm-B-_m2kGH.js";import{_ as M}from"./navBar-Sc4C80VW.js";import{l as V}from"./Group 24-BJuc7rVH.js";import{q as z}from"./index-4hp_MxG3.js";import{u as F,a as H}from"./dict-CwYOActj.js";import{u as O}from"./station-DOwaTfnq.js";import{u as R}from"./displayType-DRjpup3F.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-C1_hm9C_.js";import"./index-DyucNCMT.js";const G={class:"installList"},U={class:"card"},W={class:"card_icon_content"},X={class:"icon_num"},$={key:0},A={class:"label"},J={class:"value"},K={class:"number"},P={class:"time",style:{"margin-bottom":"8px"}},Q={key:1},Z={class:"footer"},ss={__name:"index",setup(ts){const u=C(),c=b(),d=O(),f=R(),{oil_type_status:y,ref_line_status:h}=F("oil_type_status","ref_line_status");x(()=>{y.value.forEach(o=>{o.value==90&&(o.disabled=!0)})});const e=L([]),g=async()=>{if(e.value.length<1){v("显示屏设备为空,无法进行下一步");return}if(!e.value.every(t=>t.status==1)){v("设备状态检查失败,请检查设备状态");return}if(d.installScreenItemList=e.value,f.displayStatus){u.push({path:"/displayListInfo",query:{id:c.query.id}});return}u.push({path:"/installList",query:{id:c.query.id}})},_=async()=>{const o={stationId:c.query.id,machineNo:d.machineNo,installScreenItemList:d.installScreenItemList};let t=await z(o);e.value=t.data?t.data.screenStatusItemList:[]};let m=null;return N(()=>{_(),m=setInterval(async()=>{_()},1e3)}),k(()=>{clearInterval(m)}),(o,t)=>{const S=M,q=E;return l(),i("div",null,[p(S,{title:"显示屏安装"}),s("div",G,[s("div",U,[t[2]||(t[2]=s("div",{class:"card_title"},"基础数据",-1)),s("div",W,[t[1]||(t[1]=s("img",{class:"icon",src:V,alt:""},null,-1)),s("div",X,"加油机编号："+n(r(c).query.machineNo),1)]),t[3]||(t[3]=s("div",{class:"device_status"},"设备状态",-1)),e.value.length>0?(l(),i("div",$,[(l(!0),i(D,null,B(e.value,(a,I)=>(l(),i("div",{key:a.index,class:"item"},[s("div",A,[T("显示屏 "+n(I+1)+" ",1),s("span",{class:Y({offline:!a.status})},n(a.status==1?r(H)(a.status,r(h)):"离线"),3)]),s("div",J,"显示屏编号："+n(a.screenNo),1),s("div",K,"针脚数："+n(a.pinNum),1),s("div",P,"心跳时间："+n(a.heartTime?r(w)(a.heartTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]))),128))])):(l(),i("div",Q,[p(q,{description:"空空如也"})]))]),s("div",Z,[s("div",{class:"btn",onClick:t[0]||(t[0]=()=>r(u).go(-1))},"上一步"),s("div",{class:"nexBtn",onClick:g},"下一步")])])])}}},_s=j(ss,[["__scopeId","data-v-068768cf"]]);export{_s as default};
